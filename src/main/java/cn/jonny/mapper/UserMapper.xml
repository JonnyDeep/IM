<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.jonny.mapper.UserMapper">

    <sql id="userColumns">
        ${alias}.id,
        ${alias}.name,
        ${alias}.password,
        ${alias}.port
    </sql>

    <!--<select id="selectUser" resultType="User">-->
      <!--select * from usertable where id = #{id}-->
     <!---->
  <!--</select>-->


    <select id="selectUser" resultType="User">
        select
        <include refid="userColumns">
            <property name="alias" value="t1"/>
        </include>
        from usertable t1
        where t1.id=#{id}
    </select>
    <insert id="inserUser" useGeneratedKeys="true" keyProperty="id" parameterType="cn.jonny.entity.User">
        insert into usertable (name,password,port)
        values (#{name},MD5(#{password}),#{port})
    </insert>

    <insert id="insertUserBash" useGeneratedKeys="true" keyProperty="id">
        insert into usertable(name,password,port) values
        <foreach item="item" collection="list" separator=",">
            (#{item.name},MD5(#{item.password}),#{item.port})
        </foreach>
    </insert>


</mapper>